<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Chatbot</title>
</head>
<body>
  <h1>Chatbot</h1>
  <textarea id="chatBox" rows="15" cols="60" readonly></textarea><br />
  <form id="chatForm">
    <input type="text" id="userInput" placeholder="Digite sua mensagem" autocomplete="off" required />
    <button type="submit">Enviar</button>
  </form>

  <script>
    const form = document.getElementById('chatForm');
    const chatBox = document.getElementById('chatBox');
    const userInput = document.getElementById('userInput');

    form.addEventListener('submit', async (event) => {
      event.preventDefault();

      const userMessage = userInput.value.trim();
      if (!userMessage) return;

      chatBox.value += `VocÃª: ${userMessage}\n`;

      try {
        const response = await fetch('https://api-nmdu.onrender.com/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ mensagem: userMessage }),
        });

        if (!response.ok) {
          throw new Error(`Erro na API: ${response.statusText}`);
        }

        const data = await response.json();

        chatBox.value += `Bot: ${data.resposta}\n`;

      } catch (error) {
        chatBox.value += `Erro: ${error.message}\n`;
      }

      userInput.value = '';
      chatBox.scrollTop = chatBox.scrollHeight;
    });
  </script>
</body>
</html>
